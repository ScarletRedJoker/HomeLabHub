# ============================================
# LOKI CONFIGURATION
# Auto-generated from config templates
# Environment: {{ environment }}
# Generated: {{ timestamp }}
# ============================================

# Retention Settings
LOKI_RETENTION_PERIOD=168h
LOKI_RETENTION_ENABLED=true

# Storage Configuration
LOKI_STORAGE_TYPE={{ config.loki_storage_type|default('filesystem') }}

{% if config.loki_storage_type == 's3' %}
# S3 Storage (optional - for production)
LOKI_S3_ENDPOINT={{ config.minio_host }}:{{ config.ports.minio }}
LOKI_S3_BUCKET_NAME={{ config.loki_s3_bucket|default('homelab-logs') }}
LOKI_S3_ACCESS_KEY_ID={{ secrets.minio_root_user }}
LOKI_S3_SECRET_ACCESS_KEY={{ secrets.minio_root_password }}
LOKI_S3_INSECURE={{ config.minio_use_ssl|ternary('false', 'true') }}
{% endif %}

# Limits
LOKI_INGESTION_RATE_MB=16
LOKI_INGESTION_BURST_MB=32
LOKI_MAX_ENTRIES_LIMIT=5000
LOKI_MAX_STREAMS_PER_USER=10000

# Compaction
LOKI_COMPACTION_INTERVAL=10m
LOKI_RETENTION_DELETE_DELAY=2h

# Log Level
LOKI_LOG_LEVEL={{ config.loki_log_level|default('info') }}
