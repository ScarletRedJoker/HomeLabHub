# ============================================
# GRAFANA CONFIGURATION
# Auto-generated from config templates
# Environment: {{ environment }}
# Generated: {{ timestamp }}
# ============================================

# Admin Credentials
GRAFANA_ADMIN_USER={{ secrets.grafana_admin_user|default('admin') }}
GRAFANA_ADMIN_PASSWORD={{ secrets.grafana_admin_password }}

# Server Settings
GF_SERVER_ROOT_URL={{ config.grafana_root_url|default('http://localhost:3000') }}
GF_SERVER_DOMAIN={{ config.grafana_domain|default('localhost') }}

# Security Settings
GF_SECURITY_ADMIN_USER={{ secrets.grafana_admin_user|default('admin') }}
GF_SECURITY_ADMIN_PASSWORD={{ secrets.grafana_admin_password }}
GF_SECURITY_SECRET_KEY={{ secrets.grafana_secret_key }}

# Authentication
GF_AUTH_ANONYMOUS_ENABLED=false
GF_AUTH_ANONYMOUS_ORG_ROLE=Viewer
GF_AUTH_DISABLE_LOGIN_FORM=false
GF_USERS_ALLOW_SIGN_UP=false
GF_USERS_ALLOW_ORG_CREATE=false

# Database (optional - uses SQLite by default)
{% if config.grafana_database_enabled|default(false) %}
GF_DATABASE_TYPE=postgres
GF_DATABASE_HOST={{ config.postgres_host }}:{{ config.ports.postgres }}
GF_DATABASE_NAME={{ config.grafana_database_name|default('grafana') }}
GF_DATABASE_USER={{ config.grafana_database_user|default('grafana') }}
GF_DATABASE_PASSWORD={{ secrets.grafana_database_password }}
{% endif %}

# Logging
GF_LOG_LEVEL={{ config.grafana_log_level|default('info') }}
GF_LOG_MODE=console file

# Plugins
GF_INSTALL_PLUGINS=redis-datasource,grafana-clock-panel

# SMTP (optional)
{% if config.smtp_enabled|default(false) %}
GF_SMTP_ENABLED=true
GF_SMTP_HOST={{ config.smtp_host }}:{{ config.smtp_port|default(587) }}
GF_SMTP_USER={{ secrets.smtp_user }}
GF_SMTP_PASSWORD={{ secrets.smtp_password }}
GF_SMTP_FROM_ADDRESS={{ config.smtp_from_address|default('grafana@evindrake.net') }}
GF_SMTP_FROM_NAME={{ config.smtp_from_name|default('Homelab Grafana') }}
{% endif %}

# Metrics & Tracing
GF_METRICS_ENABLED=true
GF_METRICS_INTERVAL_SECONDS=10
