# ============================================
# TRAEFIK MIDDLEWARE CONFIGURATION
# Auto-generated from config templates
# Environment: {{ environment }}
# Generated: {{ timestamp }}
# ============================================

# JWT Secret (shared with auth-service)
JWT_SECRET={{ secrets.jwt_secret }}

# ForwardAuth Middleware Configuration
TRAEFIK_FORWARD_AUTH_ADDRESS=http://homelab-auth-service:8000/api/v1/auth/validate
TRAEFIK_FORWARD_AUTH_TRUST_FORWARD_HEADER=true

# Rate Limiting Configuration
TRAEFIK_RATE_LIMIT_AVERAGE={{ config.rate_limit_average|default('100') }}
TRAEFIK_RATE_LIMIT_BURST={{ config.rate_limit_burst|default('50') }}

# CORS Configuration
TRAEFIK_CORS_ALLOWED_ORIGINS={{ config.cors_allowed_origins|default('*') }}
TRAEFIK_CORS_ALLOWED_METHODS={{ config.cors_allowed_methods|default('GET,POST,PUT,DELETE,OPTIONS') }}
TRAEFIK_CORS_ALLOWED_HEADERS={{ config.cors_allowed_headers|default('*') }}
TRAEFIK_CORS_ALLOW_CREDENTIALS={{ config.cors_allow_credentials|default('true') }}

# Access Log Configuration
TRAEFIK_ACCESS_LOG_FILE=/data/access.log
TRAEFIK_ACCESS_LOG_FORMAT={{ config.access_log_format|default('json') }}
